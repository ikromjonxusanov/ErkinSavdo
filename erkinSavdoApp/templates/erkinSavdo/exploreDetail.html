{% extends "base.html" %}
{% load static %}
{% load i18n %}
{% block style %}
<link rel="stylesheet" href="{% static 'css/animate.css' %}" xmlns="http://www.w3.org/1999/html"
      xmlns="http://www.w3.org/1999/html">
    <link rel="stylesheet" href="{% static 'css/flaticon.css' %}">
    <link rel="stylesheet" href="{% static 'css/tiny-slider.css' %}">
    <link rel="stylesheet" href="{% static 'css/glightbox.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/aos.css' %}">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="{% static 'css/product.css' %}">
{% endblock %}

{% block content %}
    <div class="product_block">
        <div class="basic">
            <div class="gallarey">
                <div class="pop_img">
                    <div class="pick">
                        <img src="{{home.image.url}}" alt="">
                    </div>
                </div>
                <div class="big">
                    <img src="{{home.image.url}}" alt="">
                </div>
            </div>
        </div>
        <div class="basic padd">
            <a class="back" href="{% url 'explore' %}">â€¹ Back to explore</a>
            <div class="basic_text">

                <h3 class="basic_h3">{{home.title}}</h3>
                <span class="cost">{{home.priceType}} {{home.price}}</span>
                <div class="more_about">
                    {{home.description}}
                </div>
                <div class="pro_about">
                    <span class="about_spn">Address: </span> {{home.address}}<br>
                    <span class="about_spn">Province/District: </span> {{home.region}}<br>
                    <span class="about_spn">Area: </span> {{home.area}}<br>
                    <span class="about_spn">Length of rooms: </span> {{home.lengthOfRooms}}<br>
                    <span class="about_spn">
                    {% if home.rentOrSent|length == 6 %}
                        Payment date:
                        </span>
                        {% if home.rentOrSent|slice:'5:6' == 'w' %}
                            Weeks payment
                        {% elif home.rentOrSent|slice:'5:6' == 'd' %}
                            Days payment
                        {% elif home.rentOrSent|slice:'5:6' == 'm' %}
                            Month
                        {% endif %}
                        {% else %}
                            Sotiladi: </span>
                            {% if home.status %}
                                Sold
                            {% else %}
                                Sale
                            {% endif %}
                    {% endif %}
                    <br>
                    <span class="about_spn">Owner: </span>
                    <a href="{% url 'usersProfile' home.author.user.username %}">
                    <img src="{{home.author.profilePicture.url}}" alt="{{home.author}}" width="30px" class="rounded">{{home.author}}

                    </a>
                    <br>
                    {% if not home.status %}
                    <span class="about_spn">{{home.typeOfHouse}} call the owner: </span> <a href="tel:{{home.author.phone}}" class=" btn btn-outline-success rounded">Call </a>
                    {% else %}
                    <span class="about_spn">{{home.typeOfHouse}} <b>Sold out</b></span>
                    {% endif %}
                    {% if request.user.customer == home.author %}
                    <div class=" mt-3">
                        <button class="btn btn-danger" data-toggle="modal" data-target="#exampleModal">Delete</button>

                        <button class="btn btn-primary" data-toggle="modal" data-target="#exampleModal2">Sold out</button>
                        <a href="{% url 'exploreDetailUpdate' home.id %}" class="btn btn-info">Edit</a>

                        <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                          <div class="modal-dialog" role="document">
                            <div class="modal-content">
                              <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                                <button type="button" class="close border border-0" data-dismiss="modal" aria-label="Close">
                                  <span aria-hidden="true" class=" border border-0">&times;</span>
                                </button>
                              </div>
                              <div class="modal-body">
                                <h3>Delete {{home}}</h3>
                              </div>
                              <div class="modal-footer">
                                <form method="POST">
                                    {% csrf_token %}
                                    <input type="hidden" name="type" value="delete">
                                    <button type="button" class="btn btn-info" data-dismiss="modal">cancel</button>
                                    <button class="btn btn-danger">delete</button>
                                  </form>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="modal fade" id="exampleModal2" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                          <div class="modal-dialog" role="document">
                            <div class="modal-content">
                              <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel2">Sold out</h5>
                                <button type="button" class="close border border-0" data-dismiss="modal" aria-label="Close">
                                  <span aria-hidden="true" class=" border border-0">&times;</span>
                                </button>
                              </div>
                              <div class="modal-body">
                                <h3>Sold out {{home}}</h3>
                              </div>
                              <div class="modal-footer">
                                <form method="POST">
                                    {% csrf_token %}
                                    <input type="hidden" name="type" value="sold">
                                    <button type="button" class="btn btn-info" data-dismiss="modal">cancel</button>
                                    <button class="btn btn-primary">Sold out</button>
                                  </form>
                              </div>
                            </div>
                          </div>
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>

        </div>
    </div>
    <div class="container-xl">
        <div class="row">
            {% if rekhouses %}
			{% for object in rekhouses %}
			<div class="col-lg-3 col-md-4 col-sm-6" data-aos="fade-up" data-aos-delay="100" data-aos-duration="1000">
				<div class="property-wrap">
					<a href="{% url 'exploreDetail' object.id %}" class="img img-property" style="background-image:
                                url('{{object.image.url}}');">
						<p class="price"><span class="orig-price">{{object.priceType}} {{object.price}}</span></p>
					</a>
					<div class="text">

						<h3><a href="{% url 'exploreDetail' object.id %}">{{object.title}}</a></h3>
						<p>
							{% if object.description|length < 110 %}
								{{object.description }}
							{% else %}
								{{object.description | slice:":100" }}...

							{% endif %}

						</p>
						<p>
						<span class="location">
							<i class="ion-ios-pin"></i>
							{{object.region}}
							<span class="{{object.rentOrSent|slice:'0:4'| lower}}">{{object.rentOrSent}}</span></span>

					</div>
				</div>
			</div>
			{% endfor %}
			{% endif %}

        </div>
    </div>
{% comment %}

<div class="container">
    <div class="row">
        <div class="col-lg-6 col-md-6 col-sm-12" style="margin-top: 100px; " data-aos="fade-up" data-aos-delay="100" data-aos-duration="1000">
            <div class="property-wrap" style="background-color: #dfdfdf;">
            <a href="#" class="img img-property" style="background-image:
                    url('{{home.image.url}}');">
                <p class="price"><span class="orig-price">$ {{home.price}}</span></p>
            </a>
            <div class="text" >
                <h3><a href="#">{{home.title}}</a></h3>
                <p>
                    {{home.description}}
                </p>
                <p>
                    <h5><b>Address:</b></h5>
                </p>
                <span class="location">
                    <i class="ion-ios-pin"></i>
                        {{home.region}}
                    <span class="sale">Sale</span></span>
                <ul class="property_list mt-3 mb-0">
                    <li class="col-lg-6"><span class="fas fa-home"></span>{{home.area}} m<sup>2</sup></li>
                    <li class="col-lg-6"><span class="fas fa-money-bill-alt"></span> {{home.price}} $</li>
                    {#<br><li><span class="fas fa-eye"></span></li>#}
                </ul>
                <a href="tel:{{home.author.phone}}" class="mt-3 btn btn-outline-success rounded w-100">call</a>

            </div>
        </div>
        </div>
        <div class="col-lg-6 col-md-6 col-sm-12 mt-5">

            <div class="mt-5">
               {% for object in rekhouses %}
                    <div class="card">
                        <div class="row no-gutters">
                            <div class="col-auto">
                                <img src="//placehold.it/150" class="img-fluid" alt="">
                            </div>
                            <div class="col">
                                <div class="card-block px-2">
                                    <h4 class="card-title">Title</h4>
                                    <p class="card-text">Description</p>
                                </div>
                            </div>
                        </div>
                  </div>
                {% endfor %}
			</div>

            </div>

        </div>
    </div>
</div>
{% endcomment %}
{% endblock %}
